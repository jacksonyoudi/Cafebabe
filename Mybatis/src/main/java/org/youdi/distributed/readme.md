# 锁

锁是啥？
竞争资源：
排他性 第三方

目的：为了保护程序混乱 
分布式锁的 性能下降

分布式锁
分布式的情况下，有些资源必须要进行访问限制，比如扣减服务等

JVM锁的异同


### 在分布式锁的情况下，能保证多机，多进程，多线程访问资源一致性，这个时候还需要进行进程内部的JVM锁？
需要的， 可以进行过滤，减少并发，需要考虑中间件的性能。
比如一台机器上只会有一个请求， 这样可以降低1个数量级的请求。
分治思想
用锁： 串行化处理






1. mysql
2. redis
3. zk
4. etcd

轻量级，重量级分布式


### 两大类分布式锁





jvm锁
1. CAS自旋 
2. 系统调用 
    线程还循环？ 让出cpu自己阻塞，线程状态？ 后续如何唤醒，运行